var previousPos = 0;\nvar totalError = 0;\n\nfunction loop() {\n  var target = 150;\n  setGraphTarget(target);\n\n  var kP = 1.5;\n  var kI = 0.035;\n  var kD = 12;\n\n  var error = target - getArmPosition();\n  var changeInError = error - previousPos;\n  if (Math.abs(error) < 15) {\n    totalError += error;\n    kD = 0;\n  } else {\n  	totalError = 0;\n  }\n  if (Math.abs(error) > 65) {\n  	kD = 0;\n  }\n  \n  previousPos = error;\n\n  var P = kP * error;\n  var I = kI * totalError;\n  var D = kD * changeInError;\n  var output = P + I + D;\n\n  setArmPower(output);\n  setGraphVariable(D);\n\n  timeout(loop, 40);\n}\n\nloop();
